<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="" lang="en"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multitasking in the Linux Kernel. Interrupts and Tasklets</title>
<meta name="description" content="In the previous article I mentioned about multithreading. The article covered such basic notions as types of multitasking, the scheduler,">
<meta name="robots" content="noodb">
<meta name="robots" content="noyaca">
<link rel="stylesheet" type="text/css" href="Interrupts_and_Tasklets_files/A.css">
<link href="Interrupts_and_Tasklets_files/css.css" rel="stylesheet" type="text/css">
<link href="http://kukuruku.co/templates/skin/kukuruku/images/favicon.ico" rel="shortcut icon">
<link rel="apple-touch-icon" sizes="57x57" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xapple-touch-icon-57x57.png.pagespeed.ic.bmlycyn3-4.png">
<link rel="apple-touch-icon" sizes="114x114" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xapple-touch-icon-114x114.png.pagespeed.ic.LUV8YYPA1L.png">
<link rel="apple-touch-icon" sizes="72x72" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xapple-touch-icon-72x72.png.pagespeed.ic.KMP4Gt2vQB.png">
<link rel="apple-touch-icon" sizes="144x144" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xapple-touch-icon-144x144.png.pagespeed.ic.6SKIlkxYn1.png">
<link rel="apple-touch-icon" sizes="60x60" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xapple-touch-icon-60x60.png.pagespeed.ic.SYpIt3BPBU.png">
<link rel="apple-touch-icon" sizes="120x120" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xapple-touch-icon-120x120.png.pagespeed.ic.A3B_k4dsUJ.png">
<link rel="apple-touch-icon" sizes="76x76" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xapple-touch-icon-76x76.png.pagespeed.ic.SjCHJLkuFu.png">
<link rel="apple-touch-icon" sizes="152x152" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xapple-touch-icon-152x152.png.pagespeed.ic.XzhSBlqnSl.png">
<link rel="icon" type="image/png" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xfavicon-196x196.png.pagespeed.ic.o0JC9tGeTI.png" sizes="196x196">
<link rel="icon" type="image/png" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xfavicon-160x160.png.pagespeed.ic.faWJVUlV5c.png" sizes="160x160">
<link rel="icon" type="image/png" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xfavicon-96x96.png.pagespeed.ic.diwWkaUe73.png" sizes="96x96">
<link rel="icon" type="image/png" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xfavicon-16x16.png.pagespeed.ic.zAVy1hh6x6.png" sizes="16x16">
<link rel="icon" type="image/png" href="http://kukuruku.co/templates/skin/kukuruku/images/favicons/xfavicon-32x32.png.pagespeed.ic.5KMDTDfwN3.png" sizes="32x32">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="msapplication-TileImage" content="http://kukuruku.co/templates/skin/kukuruku/images/favicons/mstile-144x144.png">
<link rel="search" type="application/opensearchdescription+xml" href="http://kukuruku.co/search/opensearch/" title="Kukuruku / Technology Hub">
<link rel="alternate" type="application/rss+xml" href="http://kukuruku.co/rss/comments/137/" title="Multitasking in the Linux Kernel. Interrupts and Tasklets">
<link rel="canonical" href="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets">
<!--googleoff: all-->
<script async="" src="Interrupts_and_Tasklets_files/cbgapi.loaded_1"></script><script async="" src="Interrupts_and_Tasklets_files/cbgapi.loaded_0"></script><script src="Interrupts_and_Tasklets_files/ca-pub-5957750206575747.js" type="text/javascript" async=""></script><script src="Interrupts_and_Tasklets_files/widgets.js" id="twitter-wjs"></script><script gapi_processed="true" src="Interrupts_and_Tasklets_files/platform.js" async="" type="text/javascript"></script><script src="Interrupts_and_Tasklets_files/sdk.js" id="facebook-jssdk"></script><script src="Interrupts_and_Tasklets_files/analytics.js" async=""></script><script>//<![CDATA[
var DIR_WEB_ROOT='http://kukuruku.co';var DIR_STATIC_SKIN='http://kukuruku.co/templates/skin/kukuruku';var DIR_ROOT_ENGINE_LIB='http://kukuruku.co/engine/lib';var LIVESTREET_SECURITY_KEY='12df6e925cb956ab9d166e0cb5cd13ae';var SESSION_ID='qf80cnn8gnc3rsau2de0111345';var BLOG_USE_TINYMCE='';var TINYMCE_LANG='en';var aRouter=new Array();aRouter['error']='http://kukuruku.co/error/';aRouter['registration']='http://kukuruku.co/registration/';aRouter['profile']='http://kukuruku.co/profile/';aRouter['my']='http://kukuruku.co/my/';aRouter['blog']='http://kukuruku.co/hub/';aRouter['personal_blog']='http://kukuruku.co/personal_blog/';aRouter['index']='http://kukuruku.co/index/';aRouter['topic']='http://kukuruku.co/topic/';aRouter['login']='http://kukuruku.co/login/';aRouter['people']='http://kukuruku.co/people/';aRouter['settings']='http://kukuruku.co/settings/';aRouter['tag']='http://kukuruku.co/tag/';aRouter['talk']='http://kukuruku.co/talk/';aRouter['comments']='http://kukuruku.co/comments/';aRouter['rss']='http://kukuruku.co/rss/';aRouter['link']='http://kukuruku.co/link/';aRouter['question']='http://kukuruku.co/question/';aRouter['blogs']='http://kukuruku.co/hubs/';aRouter['search']='http://kukuruku.co/search/';aRouter['admin']='http://kukuruku.co/admin/';aRouter['ajax']='http://kukuruku.co/ajax/';aRouter['feed']='http://kukuruku.co/feed/';aRouter['stream']='http://kukuruku.co/stream/';aRouter['photoset']='http://kukuruku.co/photoset/';aRouter['subscribe']='http://kukuruku.co/subscribe/';aRouter['org']='http://kukuruku.co/org/';aRouter['newsletters']='http://kukuruku.co/newsletters/';aRouter['language']='http://kukuruku.co/language/';aRouter['openid_login']='http://kukuruku.co/openid_login/';aRouter['openid_settings']='http://kukuruku.co/openid_settings/';aRouter['besttopicsflow']='http://kukuruku.co/besttopicsflow/';aRouter['company']='http://kukuruku.co/company/';aRouter['companies']='http://kukuruku.co/companies/';aRouter['mainpreview']='http://kukuruku.co/mainpreview/';aRouter['page']='http://kukuruku.co/page/';aRouter['premoderation']='http://kukuruku.co/premoderation/';aRouter['sitemap']='http://kukuruku.co/sitemap/';
//]]></script>
<!--googleon: all-->
<script>var tinyMCE=false;</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49490146-1','kukuruku.co');ga('require','displayfeatures');ga('send','pageview');</script>
<meta property="fb:app_id" content="1446177405629271">
<meta property="og:site_name" content="Kukuruku Hub">
<meta property="og:type" content="article">
<meta property="og:image" content="http://kukuruku.co/uploads/topics/preview/00/00/01/37/629f62a101.jpg">
<meta property="og:url" content="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets">
<meta property="og:title" content="Multitasking in the Linux Kernel. Interrupts and Tasklets">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@kukurukuco">
<meta name="twitter:creator" content="@kukurukuco">
<meta name="twitter:url" content="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets">
<meta name="twitter:domain" content="kukuruku.co">
<meta name="twitter:title" content="Multitasking in the Linux Kernel. Interrupts and Tasklets">
<meta name="twitter:description" content="In the previous article I mentioned about multithreading. The article covered such basic notions as types of multitasking, the scheduler, scheduling strategies, the state machine, and other. This time, I want to look at the problem of scheduling from another perspective. Namely, I’m going to tell you about scheduling not threads, but their “younger brothers”. Since the article turned out to be quite long, at the last moment I decided to break it up into several parts: Multitasking in the Linux Kernel. Interrupts and Tasklets Multitasking in the Linux Kernel. Workqueue Protothread and Cooperative Multitasking In the third part, I will also try to compare all of these seemingly different entities and extract some useful ideas. After a little while, I will tell you about the way we managed to apply these ideas in practice in the Embox project, and about how we started our operating system on a small board with almost full multitasking. I will try to tell you about all of this in detail, describing the basic API and sometimes going into details of the implementation peculiarities, particularly drawing attention to the problem of scheduling. Interrupts and Their ProcessingHardware interrupt (Interrupt request — IRQ) is an external">
<meta name="twitter:image" content="http://kukuruku.co/uploads/topics/preview/00/00/01/37/629f62a101.jpg">
<script>var LS_ROUTER_ACTION='blog';var LS_ROUTER_EVENT='nix';</script>
<script src="Interrupts_and_Tasklets_files/secureAnonymousFramework"></script><style type="text/css">* html #li_ui_li_gen_1442068677102_0 a#li_ui_li_gen_1442068677102_0-link{height:1% !important;}#li_ui_li_gen_1442068677102_0{position:relative !important;overflow:visible !important;display:block !important;}#li_ui_li_gen_1442068677102_0 span{-webkit-box-sizing:content-box !important;-moz-box-sizing:content-box !important;box-sizing:content-box !important;}#li_ui_li_gen_1442068677102_0 a#li_ui_li_gen_1442068677102_0-link{border:0 !important;height:20px !important;text-decoration:none !important;padding:0 !important;margin:0 !important;display:inline-block !important;}#li_ui_li_gen_1442068677102_0 a#li_ui_li_gen_1442068677102_0-link:link, #li_ui_li_gen_1442068677102_0 a#li_ui_li_gen_1442068677102_0-link:visited, #li_ui_li_gen_1442068677102_0 a#li_ui_li_gen_1442068677102_0-link:hover, #li_ui_li_gen_1442068677102_0 a#li_ui_li_gen_1442068677102_0-link:active{border:0 !important;text-decoration:none !important;}#li_ui_li_gen_1442068677102_0 a#li_ui_li_gen_1442068677102_0-link:after{content:"." !important;display:block !important;clear:both !important;visibility:hidden !important;line-height:0 !important;height:0 !important;}#li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-logo{background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-position:0px -593px !important;background-repeat:no-repeat !important;background-color:#0077b5 !important;background-size:initial !important;cursor:pointer !important;border:0 !important;border-right:1px solid #066094 !important;text-indent:-9999em !important;overflow:hidden !important;padding:0 !important;margin:0 !important;position:absolute !important;left:0px !important;top:0px !important;display:block !important;width:20px !important;height:20px !important;float:right !important;border-radius:2px !important;-moz-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-moz-border-radius-topright:2px !important;-moz-border-radius-bottomright:2px !important;}#li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title{color:#fff !important;cursor:pointer !important;display:block !important;white-space:nowrap !important;float:left !important;margin-left:1px !important;vertical-align:top !important;overflow:hidden !important;text-align:center !important;height:18px !important;padding:0 4px 0 23px !important;border:1px solid #000 !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;text-shadow:0 -1px #005887 !important;line-height:20px !important;border-radius:2px !important;-moz-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-moz-border-radius-topright:2px !important;-moz-border-radius-bottomright:2px !important;background-color:#0077b5 !important;background-image:-moz-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}#li_ui_li_gen_1442068677102_0.hovered #li_ui_li_gen_1442068677102_0-title{border:1px solid #000 !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-moz-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}#li_ui_li_gen_1442068677102_0.clicked #li_ui_li_gen_1442068677102_0-title, #li_ui_li_gen_1442068677102_0.down #li_ui_li_gen_1442068677102_0-title{color:#fff !important;border:1px solid #000 !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-moz-linear-gradient(top, #066094 0%, #066094 100%) !important;}.IN-shadowed #li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title{}.IN-shadowed #li_ui_li_gen_1442068677102_0.hovered #li_ui_li_gen_1442068677102_0-title{}.IN-shadowed #li_ui_li_gen_1442068677102_0.clicked #li_ui_li_gen_1442068677102_0-title, .IN-shadowed #li_ui_li_gen_1442068677102_0.down #li_ui_li_gen_1442068677102_0-title{}#li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title-text, #li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title-text *{color:#fff !important;font-size:11px !important;font-family:Arial, sans-serif !important;font-weight:bold !important;font-style:normal !important;-webkit-font-smoothing:antialiased !important;display:inline-block !important;background:transparent none !important;vertical-align:top !important;height:18px !important;line-height:20px !important;float:none !important;}#li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title-text strong{font-weight:bold !important;}#li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title-text em{font-style:italic !important;}#li_ui_li_gen_1442068677102_0.hovered #li_ui_li_gen_1442068677102_0-title-text, #li_ui_li_gen_1442068677102_0.hovered #li_ui_li_gen_1442068677102_0-title-text *{color:#fff !important;}#li_ui_li_gen_1442068677102_0.clicked #li_ui_li_gen_1442068677102_0-title-text, #li_ui_li_gen_1442068677102_0.down #li_ui_li_gen_1442068677102_0-title-text, #li_ui_li_gen_1442068677102_0.clicked #li_ui_li_gen_1442068677102_0-title-text *, #li_ui_li_gen_1442068677102_0.down #li_ui_li_gen_1442068677102_0-title-text *{color:#fff !important;}#li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title #li_ui_li_gen_1442068677102_0-mark{display:inline-block !important;width:0px !important;overflow:hidden !important;}.success #li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title{color:#fff !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;background-color:#0077b5 !important;background-image:-moz-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}.success #li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title-text, .success #li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1442068677102_0 #li_ui_li_gen_1442068677102_0-title{}.success #li_ui_li_gen_1442068677102_0.hovered #li_ui_li_gen_1442068677102_0-title{color:#fff !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-moz-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}.success #li_ui_li_gen_1442068677102_0.hovered #li_ui_li_gen_1442068677102_0-title-text, .success #li_ui_li_gen_1442068677102_0.hovered #li_ui_li_gen_1442068677102_0-title-text *{color:#fff !important;}.success #li_ui_li_gen_1442068677102_0.clicked #li_ui_li_gen_1442068677102_0-title, .success #li_ui_li_gen_1442068677102_0.down #li_ui_li_gen_1442068677102_0-title{color:#fff !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-moz-linear-gradient(top, #066094 0%, #066094 100%) !important;}.success #li_ui_li_gen_1442068677102_0.clicked #li_ui_li_gen_1442068677102_0-title-text, .success #li_ui_li_gen_1442068677102_0.down #li_ui_li_gen_1442068677102_0-title-text, .success #li_ui_li_gen_1442068677102_0.clicked #li_ui_li_gen_1442068677102_0-title-text *, .success #li_ui_li_gen_1442068677102_0.down #li_ui_li_gen_1442068677102_0-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1442068677102_0.clicked #li_ui_li_gen_1442068677102_0-title, .IN-shadowed .success #li_ui_li_gen_1442068677102_0.down #li_ui_li_gen_1442068677102_0-title{}#li_ui_li_gen_1442068677109_1-container.IN-top {display:inline-block !important;overflow:visible !important;position:relative !important;height:42px !important;line-height:1px !important;cursor:pointer !important;}#li_ui_li_gen_1442068677109_1.IN-top {display:inline-block !important;height:42px !important;width:60px !important;text-align:center !important;background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-color:transparent !important;background-repeat:no-repeat !important;background-position:-207px -470px !important;}#li_ui_li_gen_1442068677109_1-content.IN-top {display:inline !important;font-size:16px !important;color:#4e4e4e !important;font-weight:bold !important;font-family:Arial, sans-serif !important;line-height:38px !important;}#li_ui_li_gen_1442068677109_1-container.IN-empty #li_ui_li_gen_1442068677109_1-inner.IN-top {background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-color:transparent !important;background-repeat:no-repeat !important;background-position:0px -560px !important;background-size:initial !important;overflow:hidden !important;margin:4px auto 0 auto !important;width:28px !important;height:28px !important;display:block !important;}#li_ui_li_gen_1442068677109_1-container.IN-empty #li_ui_li_gen_1442068677109_1-content.IN-top {text-indent:-999px !important;display:inline-block !important;}#li_ui_li_gen_1442068677109_1-container.IN-hidden #li_ui_li_gen_1442068677109_1 {display:none !important;}</style><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow-x:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style></head>
<body class=" ls-user-role-guest logged-out ls-user-role-not-admin bpage action-blog event-nix"><noscript><meta HTTP-EQUIV="refresh" content="0;url='http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets?ModPagespeed=noscript'" /><style><!--table,div,span,font,p{display:none} --></style><div style="display:block">Please click <a href="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets?ModPagespeed=noscript">here</a> if you are not redirected within a few seconds.</div></noscript>
<nav class="knav navbar navbar-fixed-top" role="navigation">
<div class="container">
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
☰
</button>
<a class="navbar-brand" rel="home" href="http://kukuruku.co/"><script pagespeed_no_defer="">//<![CDATA[
(function(){var d=window,e=document,f="documentElement",g="scrollTop",k="prototype",l="body",m="getAttribute",n="",p="1",q="data",r="img",s="load",t="number",u="on",v="onload",w="pagespeed_lazy_position",x="pagespeed_lazy_replaced_functions",y="pagespeed_lazy_src",z="position",A="relative",B="resize",C="scroll",D="src";d.pagespeed=d.pagespeed||{};var E=d.pagespeed,F=function(a){this.d=[];this.a=0;this.b=!1;this.o=a;this.e=null;this.i=0;this.j=200;this.c=!1};
F[k].s=function(){var a=0;typeof d.pageYOffset==t?a=d.pageYOffset:e[l]&&e[l][g]?a=e[l][g]:e[f]&&e[f][g]&&(a=e[f][g]);var b=d.innerHeight||e[f].clientHeight||e[l].clientHeight;return{top:a,bottom:a+b,height:b}};F[k].n=function(a){var b=a[m](w);if(b)return parseInt(b,0);var b=a.offsetTop,c=a.offsetParent;c&&(b+=this.n(c));b=Math.max(b,0);a.setAttribute(w,b);return b};F[k].r=function(a){var b=this.n(a);return{top:b,bottom:b+a.offsetHeight}};
F[k].q=function(a,b){if(a.currentStyle)return a.currentStyle[b];if(e.defaultView&&e.defaultView.getComputedStyle){var c=e.defaultView.getComputedStyle(a,null);if(c)return c.getPropertyValue(b)}return a.style&&a.style[b]?a.style[b]:n};F[k].p=function(a){if(!this.c&&(0==a.offsetHeight||0==a.offsetWidth))return!1;if(this.q(a,z)==A)return!0;var b=this.s(),c=a.getBoundingClientRect();c?(a=c.top-b.height,b=c.bottom):(c=this.r(a),a=c.top-b.bottom,b=c.bottom-b.top);return a<=this.a&&0<=b+this.a};
F[k].m=function(a){this.l(a);var b=this;d.setTimeout(function(){var c=a[m](y);if(null!=c)if((b.b||b.p(a))&&-1!=a.src.indexOf(b.o)){var h=a.parentNode,G=a.nextSibling;h&&h.removeChild(a);a.getAttribute=a.k;a.removeAttribute(v);a.removeAttribute(y);a.removeAttribute(x);h&&h.insertBefore(a,G);a.src=c}else b.d.push(a)},0)};F[k].loadIfVisible=F[k].m;F[k].u=function(){this.b=!0;this.f()};F[k].loadAllImages=F[k].u;F[k].f=function(){var a=this.d,b=a.length;this.d=[];for(var c=0;c<b;++c)this.m(a[c])};
F[k].h=function(a,b){return a.a?null!=a.a(b):null!=a[m](b)};F[k].v=function(){for(var a=e.getElementsByTagName(r),b=0;b<a.length;++b){var c=a[b];this.h(c,y)&&this.l(c)}};F[k].overrideAttributeFunctions=F[k].v;F[k].l=function(a){var b=this;this.h(a,x)||(a.k=a[m],a.getAttribute=function(a){a.toLowerCase()==D&&b.h(this,y)&&(a=y);return this.k(a)},a.setAttribute(x,p))};
E.g=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent(u+b,c);else{var h=a[u+b];a[u+b]=function(){c.call(this);h&&h.call(this)}}};E.t=function(a,b){var c=new F(b);E.lazyLoadImages=c;E.g(d,s,function(){c.c=!0;c.b=a;c.a=200;c.f()});0!=b.indexOf(q)&&((new Image).src=b);var h=function(){if(!(c.c&&a||c.e)){var b=c.j;(new Date).getTime()-c.i>c.j&&(b=0);c.e=d.setTimeout(function(){c.i=(new Date).getTime();c.f();c.e=null},b)}};E.g(d,C,h);E.g(d,B,h)};
E.lazyLoadInit=E.t;})();

pagespeed.lazyLoadInit(false, "/mod_pagespeed_static/1.JiBnMqyl6S.gif");

//]]></script><img pagespeed_url_hash="655417839" src="Interrupts_and_Tasklets_files/25x25xlogo_25x25_orange.png" height="25" width="25"></a>
</div>
<div class="collapse navbar-collapse">
<ul class="nav navbar-nav navbar-menu">
<li><a href="http://kukuruku.co/" class="nav-link home">Home</a></li>
<li><a href="http://kukuruku.co/hubs/" class="nav-link hubs">Hubs</a></li>
<li><a href="http://kukuruku.co/companies/" class="nav-link companies">Companies</a></li>
<li><a href="http://kukuruku.co/stream/" class="nav-link stream">Stream</a></li>
</ul>
<ul class="nav navbar-nav user-actions navbar-right">
<li>
<a href="https://twitter.com/kukurukuco" target="_blank" class="nav-link twitter" title="Follow Us on Twitter"><i class="icon-twitter"></i></a>
</li>
<li>
<a href="https://www.facebook.com/kukurukuco" target="_blank" class="nav-link facebook" title="Follow Us on Facebook"><i class="icon-facebook"></i></a>
</li>
<li>
<button class="navbar-btn btn-link newsletters" title="Email Subscriptions"><i class="icon-envelope"></i></button>
</li>
<li>
<a href="http://kukuruku.co/rss/index/" class="nav-link rss" alt="RSS Feed" title="RSS Feed"><i class="icon-rss"></i></a>
</li>
<li><button type="button" class="btn btn-success navbar-btn js-login-form-show kbtn signin"><i class="icon-user"></i>Become an author / Sign in</button></li>
</ul>
</div><!-- /.navbar-collapse -->
</div>
</nav>
<article class="topic topic-type-topic js-topic published" itemscope="" itemtype="http://schema.org/Article">
<div class="no-cover">
<div class="cover-row">
<div class="cover-content">
<header role="banner" class="topic-header col-lg-6 col-md-9 center-block">
<h1 class="topic-title" itemprop="name headline">Multitasking in the Linux Kernel. Interrupts and Tasklets
</h1>
<h5 class="author">
<span class="by">Written by</span>
<span class="name">Vita Loginova</span>
|
<time datetime="2015-01-27T21:36:22-05:00" title="27 January 2015" itemprop="datePublished">
27 January 2015
</time>
|
<a href="http://habrahabr.ru/post/244071/" class="source" target="_blank">Original Source</a>
</h5>
<div class="ad-block">
<script type="text/javascript" pagespeed_no_defer="">pagespeed.lazyLoadImages.overrideAttributeFunctions();</script><script async="" src="Interrupts_and_Tasklets_files/adsbygoogle.js"></script>
<!-- Article Header Responsive -->
<ins data-adsbygoogle-status="done" class="adsbygoogle" style="display: block; height: 90px;" data-ad-client="ca-pub-5957750206575747" data-ad-slot="5852533318" data-ad-format="auto"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:923px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:923px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;" frameborder="0" height="90" width="923"></iframe></ins></ins></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
</div>
</header>
</div>
</div>
</div>
<!-- /article header section -->
<div style="height: 70px;" class="col-sm-6 center-block social-share-block">
<div class=" fb_reset" id="fb-root"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe src="Interrupts_and_Tasklets_files/44OwK74u0Ie.html" style="border: medium none;" tabindex="-1" title="Facebook Cross Domain Communication Frame" aria-hidden="true" id="fb_xdm_frame_http" scrolling="no" allowfullscreen="true" allowtransparency="true" name="fb_xdm_frame_http" frameborder="0"></iframe><iframe src="Interrupts_and_Tasklets_files/44OwK74u0Ie_002.html" style="border: medium none;" tabindex="-1" title="Facebook Cross Domain Communication Frame" aria-hidden="true" id="fb_xdm_frame_https" scrolling="no" allowfullscreen="true" allowtransparency="true" name="fb_xdm_frame_https" frameborder="0"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div></div>
<script>(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1446177405629271&version=v2.0";fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script>
<ul style="position: fixed; left: 285.117px; width: 70px; top: 70px;" class="list-inline text-center">
<li class="google">
<!-- Place this tag where you want the share button to render. -->
<div id="___plus_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 73px; height: 60px;"><iframe title="+Partager" data-gapiattached="true" src="Interrupts_and_Tasklets_files/sharebutton.html" name="I0_1442068677668" id="I0_1442068677668" vspace="0" tabindex="0" style="position: static; top: 0px; width: 73px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 60px;" scrolling="no" marginwidth="0" marginheight="0" hspace="0" frameborder="0" width="100%"></iframe></div>
<!-- Place this tag after the last share tag. -->
<script>(function(){var po=document.createElement('script');po.type='text/javascript';po.async=true;po.src='https://apis.google.com/js/platform.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po,s);})();</script>
</li>
<li class="linkedin">
<script src="Interrupts_and_Tasklets_files/in.js">
              lang: en_US
            </script>
<span class="IN-widget" style="line-height: 1; vertical-align: baseline; display: inline-block; text-align: center;"><span style="padding: 0px ! important; margin: 0px ! important; text-indent: 0px ! important; display: inline-block ! important; vertical-align: baseline ! important; font-size: 1px ! important;"><span id="li_ui_li_gen_1442068677109_1-container" class="IN-top"><span id="li_ui_li_gen_1442068677109_1" class="IN-top"><span id="li_ui_li_gen_1442068677109_1-inner" class="IN-top"><span id="li_ui_li_gen_1442068677109_1-content" class="IN-top">16</span></span></span></span></span><br><span style="padding: 0px ! important; margin: 0px ! important; text-indent: 0px ! important; display: inline-block ! important; vertical-align: baseline ! important; font-size: 1px ! important;"><span id="li_ui_li_gen_1442068677102_0"><a id="li_ui_li_gen_1442068677102_0-link" href="javascript:void(0);"><span id="li_ui_li_gen_1442068677102_0-logo">in</span><span id="li_ui_li_gen_1442068677102_0-title"><span id="li_ui_li_gen_1442068677102_0-mark"></span><span id="li_ui_li_gen_1442068677102_0-title-text">Share</span></span></a></span></span></span><script type="IN/Share+init" data-url="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" data-counter="top"></script>
</li>
<li class="facebook">
<div fb-iframe-plugin-query="action=like&amp;app_id=1446177405629271&amp;container_width=0&amp;href=http%3A%2F%2Fkukuruku.co%2Fhub%2Fnix%2Fmultitasking-in-the-linux-kernel-interrupts-and-tasklets&amp;layout=box_count&amp;locale=en_US&amp;sdk=joey&amp;share=false&amp;show_faces=true" fb-xfbml-state="rendered" class="fb-like fb_iframe_widget" data-href="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" data-layout="box_count" data-action="like" data-show-faces="true" data-share="false"><span style="vertical-align: bottom; width: 47px; height: 61px;"><iframe class="" src="Interrupts_and_Tasklets_files/like.html" style="border: medium none; visibility: visible; width: 47px; height: 61px;" title="fb:like Facebook Social Plugin" scrolling="no" allowfullscreen="true" allowtransparency="true" name="fdaa3df8a007ae" frameborder="0" height="1000px" width="1000px"></iframe></span></div>
</li>
<li class="twitter">
<iframe src="Interrupts_and_Tasklets_files/tweet_button.html" title="Twitter Tweet Button" style="position: static; visibility: visible; width: 55px; height: 61px;" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" allowtransparency="true" scrolling="no" id="twitter-widget-0" frameborder="0"></iframe>
<script>window.twttr=(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f);};return t;}(document,"script","twitter-wjs"));</script>
</li>
</ul>
</div>
<div class="col-lg-3 col-md-1 topic-col-left"></div>
<div class="topic-content text col-lg-6 col-md-9" itemprop="articleBody">
<p>In the <a href="http://kukuruku.co/hub/opensource/multitasking-management-in-the-operating-system-kernel">previous article</a>
 I mentioned about multithreading. The article covered such basic 
notions as types of multitasking, the scheduler, scheduling strategies, 
the state machine, and other. </p><p>This time, I want to look at the 
problem of scheduling from another perspective. Namely, I’m going to 
tell you about scheduling not threads, but their “younger brothers”. 
Since the article turned out to be quite long, at the last moment I 
decided to break it up into several parts:</p> <a name="cut"></a> <ol><li>Multitasking in the Linux Kernel. Interrupts and Tasklets<br>
</li><li>Multitasking in the Linux Kernel. Workqueue<br>
</li><li>Protothread and Cooperative Multitasking<br>
</li></ol><p>In the third part, I will also try to compare all of these 
seemingly different entities and extract some useful ideas. After a 
little while, I will tell you about the way we managed to apply these 
ideas in practice in the <a href="https://code.google.com/p/embox/">Embox</a> project, and about how we started our operating system on a small board with almost full multitasking. </p><p>I
 will try to tell you about all of this in detail, describing the basic 
API and sometimes going into details of the implementation 
peculiarities, particularly drawing attention to the problem of 
scheduling. </p><h2>Interrupts and Their Processing</h2><p>Hardware interrupt (Interrupt request — <b>IRQ</b>)
 is an external asynchronous event that comes from the hardware. It 
suspends the program flow and passes control to the processor to handle 
the event. </p><p>The processing of a hardware interrupt occurs the following way: </p><ol><li>The current thread of control is suspended; the context information to return to the thread is saved.<br>
</li><li>A handler function (<b>ISR</b> – interrupt service routine) is 
performed in the context of the disabled hardware interrupts. The 
handler should perform the actions that are necessary for the current 
interrupt.<br>
</li><li>The equipment is informed that the interrupt is handled. So now it can generate new interrupts.<br>
</li><li>The context is restored for the return from the interrupt.<br>
</li></ol><p>The handler function can be quite long, which is improper 
considering the fact that it is performed within the context of disabled
 hardware interrupts. Therefore, it was decided to divide the handling 
of interrupts into two parts (they are called top-half and bottom-half 
in Linux):</p><ul><li>The ISR itself, which is invoked during the 
interruption, performs only the most minimal work that cannot be 
postponed for later. It collects information about the interrupt that is
 necessary for further handling. Also, it interacts with the hardware, 
for example, blocks or clears the IRQ of the device and schedules the 
second part.<br>
</li><li>The second part, in which the main handling is performed, is 
run in the different context of the processor, in which hardware 
interrupts are enabled. The call of this part of the handler will be 
performed later.<br>
</li></ul><p>Thus, we have come to the deferred processing of interrupts. In Linux, there are&nbsp;<b>tasklet</b> and <b>workqueue</b>&nbsp;for this purpose. </p><h3>Tasklet</h3><p>In short, a <b>tasklet</b>
 is something like a very small thread that has neither stack, not 
context of its own. Such “threads” work quickly and completely. The main
 features of tasklets are the following: </p><ul><li>tasklets are atomic, so we cannot use <b>sleep()</b> and such synchronization primitives as <a href="https://en.wikipedia.org/wiki/Mutual_exclusion">mutexes</a>, <a href="https://en.wikipedia.org/wiki/Semaphore_%28programming%29">semaphores</a>, etc. from them. But we can use, say, <a href="https://en.wikipedia.org/wiki/Spinlock">spinlock</a>;<br>
</li><li>they are called in a “softer” context, than ISR. In this 
context hardware interrupts are allowed. They displace tasklets for the 
time of the ISR execution. This context is called <b>softirq</b> in the Linux kernel and in addition to the running of tasklets, it is also used by several subsystems;<br>
</li><li>a tasklet runs on the same core that schedules it. Or rather, 
has been the first one to schedule it by calling softirq, the handlers 
of which are always bound to the calling kernel;<br>
</li><li>different tasklets can be running in parallel. But at the same 
time, a tasklet cannot be called concurrently with itself, as it runs on
 one kernel only: the kernel that has scheduled its execution;<br>
</li><li>tasklets are executed by the principle of non-preemptive 
scheduling, one by one, in turn. We can schedule them with two different
 priorities: <i>normal</i> and <i>high</i>.<br>
</li></ul><p>It’s time to look under the hood and see how they work. 
First of all, the tasklet structure (defined in 
&lt;linux/interrupt.h&gt;):</p><pre class="prettyprint"><code><span class="kwd">struct</span><span class="pln"> tasklet_struct<br></span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="kwd">next</span><span class="pun">;</span><span class="pln"> &nbsp;</span><span class="com">/* The next tasklet in line for scheduling */</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> state</span><span class="pun">;</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="com">/* TASKLET_STATE_SCHED or TASKLET_STATE_RUN */</span><span class="pln"><br>&nbsp; &nbsp; atomic_t count</span><span class="pun">;</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">/* Responsible for the tasklet being activated or not */</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">(*</span><span class="pln">func</span><span class="pun">)(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">);</span><span class="pln"> &nbsp;</span><span class="com">/* The main function of the tasklet */</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> data</span><span class="pun">;</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">/* The parameter func is started with */</span><span class="pln"><br></span><span class="pun">};</span></code></pre><p>Before using a tasklet, we should initialize it at first: </p><pre class="prettyprint"><code><span class="com">/* By default, the tasklet is activated */</span><span class="pln"><br></span><span class="kwd">void</span><span class="pln"> tasklet_init</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">t</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">(*</span><span class="pln">func</span><span class="pun">)(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> data</span><span class="pun">);</span><span class="pln"><br>DECLARE_TASKLET</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> func</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">);</span><span class="pln"><br>DECLARE_TASKLET_DISABLED</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> func</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">);</span><span class="pln"> </span><span class="com">/* the deactivated tasklet */</span></code></pre><p>Tasklets are scheduled easily: the tasklet is placed into one queue out of two, depending on the priority. Queues are organized as singly-linked lists. At that, each CPU has its own queues. We can do it with the help of the following functions: </p><pre class="prettyprint"><code><span class="kwd">void</span><span class="pln"> tasklet_schedule</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">t</span><span class="pun">);</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">/* with normal priority */</span><span class="pln"><br></span><span class="kwd">void</span><span class="pln"> tasklet_hi_schedule</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">t</span><span class="pun">);</span><span class="pln"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="com">/* with high priority */</span><span class="pln"><br></span><span class="kwd">void</span><span class="pln"> tasklet_hi_schedule_first</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">t</span><span class="pun">);</span><span class="pln"> &nbsp;</span><span class="com">/* out of the queue */</span></code></pre><p>When the tasklet is scheduled, its state set to&nbsp;<b>TASKLET_STATE_SCHED</b>, and the tasklet is being added to a queue. While it is in this state, we cannot schedule it, as nothing will happen in this case. The tasklet can be in several places in the queue for scheduling that is organized via the next field of the <b>tasklet_struct</b> structure. However, it is true for any lists bound via the object field, like &lt;linux/list.h&gt;.</p><p>For the time of execution, the tasklet state is set to <b>TASKLET_STATE_RUN</b>. By the way, the tasklet gets out the queue before the execution, and the <b>TASKLET_STATE_SCHED</b> state is removed. Thus, we can schedule it again during its execution. This can be done by the tasklet itself, as well as by the interruption on another kernel. However, in the latter case it will be called only after it will finish its running on the first kernel. </p><p>Interestingly enough, we can enable and disable the tasklet recursively. The following functions are in charge of this: </p><pre class="prettyprint"><code><span class="kwd">void</span><span class="pln"> tasklet_disable_nosync</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">t</span><span class="pun">);</span><span class="pln"> </span><span class="com">/* disabling */</span><span class="pln"><br></span><span class="kwd">void</span><span class="pln"> tasklet_disable</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">t</span><span class="pun">);</span><span class="pln"> </span><span class="com">/* disabling with the wait for the completion of tasklet’s operation */</span><span class="pln"><br></span><span class="kwd">void</span><span class="pln"> tasklet_enable</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">t</span><span class="pun">);</span><span class="pln"> </span><span class="com">/* enabling */</span></code></pre><p>If the tasklet has been disabled, we can still add it to the queue for scheduling, but it will not be executed on the CPU until it is enabled again. Moreover, if the tasklet has been disabled several times, it should be enabled exactly the same number of times, there is the <i>count</i> field in the structure for this purpose. </p><p>We can also kill tasklets. Like this:</p><pre class="prettyprint"><code><span class="kwd">void</span><span class="pln"> tasklet_kill</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">t</span><span class="pun">);</span></code></pre><p>At that, it will be killed after the execution only, in case if it has been scheduled already. If the tasklet schedules itself, we should not forget to forbid it doing this before we call this function. The programmer is responsible for this. </p><p>The most interesting are the functions playing the role of the scheduler: </p><pre class="prettyprint"><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> tasklet_action</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> softirq_action </span><span class="pun">*</span><span class="pln">a</span><span class="pun">);</span><span class="pln"><br></span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> tasklet_hi_action</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> softirq_action </span><span class="pun">*</span><span class="pln">a</span><span class="pun">);</span></code></pre><p>Since they are almost the same, there’s no sense in providing the code of both functions. Still, we should take a look at one of them to find out more details: </p><pre class="prettyprint"><code><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> tasklet_action</span><span class="pun">(</span><span class="kwd">struct</span><span class="pln"> softirq_action </span><span class="pun">*</span><span class="pln">a</span><span class="pun">)</span><span class="pln"><br></span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">list</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; local_irq_disable</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; list </span><span class="pun">=</span><span class="pln"> __this_cpu_read</span><span class="pun">(</span><span class="pln">tasklet_vec</span><span class="pun">.</span><span class="pln">head</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; __this_cpu_write</span><span class="pun">(</span><span class="pln">tasklet_vec</span><span class="pun">.</span><span class="pln">head</span><span class="pun">,</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; __this_cpu_write</span><span class="pun">(</span><span class="pln">tasklet_vec</span><span class="pun">.</span><span class="pln">tail</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">__get_cpu_var</span><span class="pun">(</span><span class="pln">tasklet_vec</span><span class="pun">).</span><span class="pln">head</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; local_irq_enable</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">list</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">struct</span><span class="pln"> tasklet_struct </span><span class="pun">*</span><span class="pln">t </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; list </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">-&gt;</span><span class="kwd">next</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tasklet_trylock</span><span class="pun">(</span><span class="pln">t</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">atomic_read</span><span class="pun">(&amp;</span><span class="pln">t</span><span class="pun">-&gt;</span><span class="pln">count</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">test_and_clear_bit</span><span class="pun">(</span><span class="pln">TASKLET_STATE_SCHED</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">t</span><span class="pun">-&gt;</span><span class="pln">state</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BUG</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; t</span><span class="pun">-&gt;</span><span class="pln">func</span><span class="pun">(</span><span class="pln">t</span><span class="pun">-&gt;</span><span class="pln">data</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tasklet_unlock</span><span class="pun">(</span><span class="pln">t</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">continue</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tasklet_unlock</span><span class="pun">(</span><span class="pln">t</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; local_irq_disable</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; t</span><span class="pun">-&gt;</span><span class="kwd">next</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">*</span><span class="pln">__this_cpu_read</span><span class="pun">(</span><span class="pln">tasklet_vec</span><span class="pun">.</span><span class="pln">tail</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; __this_cpu_write</span><span class="pun">(</span><span class="pln">tasklet_vec</span><span class="pun">.</span><span class="pln">tail</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;(</span><span class="pln">t</span><span class="pun">-&gt;</span><span class="kwd">next</span><span class="pun">));</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; __raise_softirq_irqoff</span><span class="pun">(</span><span class="pln">TASKLET_SOFTIRQ</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; local_irq_enable</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span></code></pre><p>Pay attention to the call of <b>tasklet_trylock()</b> and <b>tasklet_lock()</b> functions.&nbsp;<b>tasklet_trylock()</b> sets the tasklet state to <b>TASKLET_STATE_RUN</b>, and thereby blocks the tasklet, which prevents the execution of the same tasklet on different CPUs. </p><p>In fact, these schedule functions implement cooperative multitasking that I have discussed in detail in <a href="http://kukuruku.co/hub/opensource/multitasking-management-in-the-operating-system-kernel">this article</a>. The functions are registered as the handlers of <i>softirq</i> that is initiated during the scheduling of tasklets. </p><p>You can find the implementation of all the above functions in <i>include/linux/interrupt.h</i> and <i>kernel/softirq.c</i> files. </p><p>To Be Continued</p><p>In the next article, I will tell you about a much more powerful mechanism – the workqueue – that is also often used for the deferred processing of interrupts.</p>
</div>
<aside class="col-lg-3 col-md-1 sidebar">
<div class="block start-writing hidden-md hidden-sm hidden-xs text-center">
<h3 class="title">START WRITING AT KUKURUKU HUB</h3>
<button type="button" class="btn btn-default js-login-form-show btn-become-author">Become an Author</button>
</div>
<script src="Interrupts_and_Tasklets_files/adsbygoogle.js"></script>
<div class="ad-block hidden-md hidden-sm hidden-xs text-center">
<!-- 300x600 -->
<ins data-adsbygoogle-status="done" class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-5957750206575747" data-ad-slot="4461810114"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;" frameborder="0" height="600" width="300"></iframe></ins></ins></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
</div>
<div class="floating-box">
<div class="block top-articles hidden-md hidden-sm hidden-xs">
<h3 class="title text-center">READ NEXT</h3>
<ul class="list-unstyled">
<li>
<a href="http://kukuruku.co/hub/pm/3-ways-to-boost-your-offline-business-with-apis" class="article-title">3 ways to boost your offline business with APIs</a>
</li>
</ul>
</div>
<div class="ad-block hidden-md hidden-sm hidden-xs">
<script>google_ad_client="ca-pub-5957750206575747";google_ad_slot="4872645719";google_ad_width=300;google_ad_height=250;</script>
<!-- 300x250 ad unit -->
<script src="Interrupts_and_Tasklets_files/show_ads.js"></script><ins id="aswift_2_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_2_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;" frameborder="0" height="250" width="300"></iframe></ins></ins>
</div>
</div>
</aside>
<div class="clear"></div>
<footer class="topic-footer col-lg-6 col-md-9 center-block">
<ul class="topic-tags js-favourite-insert-after-form js-favourite-tags-topic-137 list-inline">
<li><a rel="nofollow" class="tag" href="http://kukuruku.co/tag/os/">#os</a></li><li><a rel="nofollow" class="tag" href="http://kukuruku.co/tag/kernel/">#kernel</a></li><li><a rel="nofollow" class="tag" href="http://kukuruku.co/tag/linux/">#linux</a></li><li><a rel="nofollow" class="tag" href="http://kukuruku.co/tag/multitasking/">#multitasking</a></li><li><a rel="nofollow" class="tag" href="http://kukuruku.co/tag/multithreading/">#multithreading</a></li><li><a rel="nofollow" class="tag" href="http://kukuruku.co/tag/irq/">#irq</a></li><li><a rel="nofollow" class="tag" href="http://kukuruku.co/tag/tasklet/">#tasklet</a></li> </ul>
<ul class="list-unstyled list-inline topic-info">
<li>
<span class="view-count">
<i class="icon-eye"></i>
<span class="counter">7228</span>
</span>
</li>
<li class="comments-count">
<a href="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets#comments" title="Read comments" class="icon-comments icon-active">
<span class="icon-comment"></span>
<span class="total">2</span>
</a>
</li>
<li class="social-share footer pull-right">
<a href="https://news.ycombinator.com/submitlink?t=Multitasking%20in%20the%20Linux%20Kernel.%20Interrupts%20and%20Tasklets&amp;u=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" class="ycombinator" rel="nofollow">Y</a>
</li>
<li class="social-share footer pull-right">
<a href="http://www.reddit.com/submit?url=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets&amp;title=Multitasking%20in%20the%20Linux%20Kernel.%20Interrupts%20and%20Tasklets" class="reddit" rel="nofollow"><i class="icon-reddit"></i></a>
</li>
<li class="social-share footer pull-right">
<a href="https://plus.google.com/share?url=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" class="google-plus" rel="nofollow"><i class="icon-google-plus"></i></a>
</li>
<li class="social-share footer pull-right">
<a href="http://www.facebook.com/sharer.php?s=100&amp;p[url]=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" class="facebook" rel="nofollow"><i class="icon-facebook"></i></a>
</li>
<li class="social-share footer pull-right">
<a href="http://twitter.com/share?url=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets&amp;text=Multitasking%20in%20the%20Linux%20Kernel.%20Interrupts%20and%20Tasklets%20@KukurukuCo" class="twitter" rel="nofollow"><i class="icon-twitter"></i></a>
</li>
</ul>
<div class="cards row">
<section class="col-sm-6">
<h6>Published by</h6>
<div class="author">
<div class="profile">
<a href="http://kukuruku.co/profile/kukuruku/" class="profile-cover" style="background-image: url(http://kukuruku.co/uploads/images/00/00/01/2014/08/10/3db732.jpg);">
<span class="mask"></span>
</a>
<a href="http://kukuruku.co/profile/kukuruku/" alt="Kukuruku Hub" class="avatar"><img pagespeed_lazy_replaced_functions="1" pagespeed_lazy_src="http://kukuruku.co/uploads/images/00/00/01/2014/08/10/xavatar_64x64.jpg,q185218.pagespeed.ic.ltJTCGN3dl.jpg" alt="Kukuruku Hub" class="img-circle" pagespeed_url_hash="81108594" src="Interrupts_and_Tasklets_files/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);"></a>
<h4 class="name"><a rel="author" href="http://kukuruku.co/profile/kukuruku/">Kukuruku Hub</a></h4>
</div>
<div class="info">
<span class="rating">
RATING: <span class="value">15.51</span>
</span>
<button class="btn btn-success js-login-form-show pull-right">Follow</button>
</div>
</div>
</section>
<section class="col-sm-6">
<h6>Published in</h6>
<div class="hubs media">
<div class="media-body">
<h4 class="media-heading"><a href="http://kukuruku.co/hub/nix/" class="card-hub" title="*nix">*nix</a></h4>
The *nix world is all about Unix-like systems, e.g., Linux, BSD, etc
</div>
</div>
</section>
</div>
</footer>
<div class="infobar clearfix visible">
<div class="container">
<div class="logo hidden-xs">
<a rel="home" href="http://kukuruku.co/"><img alt="Kukuruku Hub" pagespeed_url_hash="655417839" src="Interrupts_and_Tasklets_files/25x25xlogo_25x25_orange.png" height="25" width="25"></a>
</div>
<ul class="list-inline">
<li>
<div id="vote_area_topic_137" class="vote
                                                                                                                                                                                                                        vote-count-positive
                                                                                                                                                                                                            
                                                                    ">
<div class="vote-up js-login-form-show"><i class="icon-arrow-up"></i></div>
<div class="vote-count" id="vote_total_topic_137" title="All votes: 2">
2
</div>
<div class="vote-down js-login-form-show"><i class="icon-arrow-down"></i></div>
</div>
</li>
<li>
<small class="written-by hidden-xs">&nbsp;Written by <span class="author_name">Vita Loginova</span></small>
</li>
<li class="hidden-xs">
<a href="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets#comments" title="Read comments" class="icon-comments icon-active">
<span class="icon-comment-2"></span>
<span class="total">2</span>
</a>
</li>
<li class="social-share footer pull-right">
<a href="https://news.ycombinator.com/submitlink?t=Multitasking%20in%20the%20Linux%20Kernel.%20Interrupts%20and%20Tasklets&amp;u=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" class="ycombinator" rel="nofollow">Y</a>
</li>
<li class="social-share footer pull-right">
<a href="http://www.reddit.com/submit?url=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets&amp;title=Multitasking%20in%20the%20Linux%20Kernel.%20Interrupts%20and%20Tasklets" class="reddit" rel="nofollow"><i class="icon-reddit"></i></a>
</li>
<li class="social-share footer pull-right">
<a href="https://plus.google.com/share?url=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" class="google-plus" rel="nofollow"><i class="icon-google-plus"></i></a>
</li>
<li class="social-share footer pull-right">
<a href="http://www.facebook.com/sharer.php?s=100&amp;p[url]=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" class="facebook" rel="nofollow"><i class="icon-facebook"></i></a>
</li>
<li class="social-share footer pull-right">
<a href="http://twitter.com/share?url=http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets&amp;text=Multitasking%20in%20the%20Linux%20Kernel.%20Interrupts%20and%20Tasklets%20@KukurukuCo" class="twitter" rel="nofollow"><i class="icon-twitter"></i></a>
</li>
</ul>
</div>
</div>
</article> <!-- /.topic -->
<section class="recommended-articles col-lg-6 col-md-9 center-block">
<h3 class="title">RECOMMENDED</h3>
<ul class="articles-list list-inline list-unstyled">
<li>
<a href="http://kukuruku.co/hub/algorithms/" class="hub">Algorithms</a>
<a href="http://kukuruku.co/hub/algorithms/exact-maximum-clique-for-large-or-massive-real-graphs" class="article-image">
<img pagespeed_lazy_replaced_functions="1" pagespeed_lazy_src="http://kukuruku.co/uploads/topics/preview/00/00/01/80/x2a6b0109d3_300crop.png.pagespeed.ic.EQ9_MqQYNV.jpg" alt="Exact Maximum Clique for Large or Massive Real Graphs" pagespeed_url_hash="286135105" src="Interrupts_and_Tasklets_files/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" width="100%">
</a>
<a href="http://kukuruku.co/hub/algorithms/exact-maximum-clique-for-large-or-massive-real-graphs" class="article-title">Exact Maximum Clique for Large or Massive Real Graphs</a>
</li>
<li>
<a href="http://kukuruku.co/hub/algorithms/" class="hub">Algorithms</a>
<a href="http://kukuruku.co/hub/algorithms/julia-set" class="article-image">
<img pagespeed_lazy_replaced_functions="1" pagespeed_lazy_src="http://kukuruku.co/uploads/topics/preview/00/00/01/69/x75322d5e5f_300crop.jpg.pagespeed.ic.hCdNFcpu3s.jpg" alt="Julia Set" pagespeed_url_hash="3440518246" src="Interrupts_and_Tasklets_files/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" width="100%">
</a>
<a href="http://kukuruku.co/hub/algorithms/julia-set" class="article-title">Julia Set</a>
</li>
<li>
<a href="http://kukuruku.co/hub/cpp/" class="hub">C++</a>
<a href="http://kukuruku.co/hub/cpp/lock-free-data-structures-yet-another-treatise" class="article-image">
<img pagespeed_lazy_replaced_functions="1" pagespeed_lazy_src="http://kukuruku.co/uploads/topics/preview/00/00/01/60/244505c5b2_300crop.gif.pagespeed.ce.hA5-5Dlih9.gif" alt="Lock-Free Data Structures. Yet Another Treatise" pagespeed_url_hash="1943175152" src="Interrupts_and_Tasklets_files/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" width="100%">
</a>
<a href="http://kukuruku.co/hub/cpp/lock-free-data-structures-yet-another-treatise" class="article-title">Lock-Free Data Structures. Yet Another Treatise</a>
</li>
<li>
<a href="http://kukuruku.co/hub/gamedev/" class="hub">Game Development</a>
<a href="http://kukuruku.co/hub/gamedev/how-i-built-my-first-android-game-and-realized-creativity-is-all-about-iterations" class="article-image">
<img pagespeed_lazy_replaced_functions="1" pagespeed_lazy_src="http://kukuruku.co/uploads/topics/preview/00/00/01/56/x38bfa56575_300crop.png.pagespeed.ic.itOL63FXZb.jpg" alt="How I built my first Android Game and realized creativity is all about iterations" pagespeed_url_hash="998924770" src="Interrupts_and_Tasklets_files/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" width="100%">
</a>
<a href="http://kukuruku.co/hub/gamedev/how-i-built-my-first-android-game-and-realized-creativity-is-all-about-iterations" class="article-title">How I built my first Android Game and realized creativity is all about iterations</a>
</li>
<li>
<a href="http://kukuruku.co/hub/diy/" class="hub">DIY</a>
<a href="http://kukuruku.co/hub/diy/usb-killer" class="article-image">
<img pagespeed_lazy_replaced_functions="1" pagespeed_lazy_src="http://kukuruku.co/uploads/topics/preview/00/00/01/55/x24b34beff3_300crop.gif.pagespeed.ic.ZjVatI7uGH.png" alt="USB Killer" pagespeed_url_hash="1157079427" src="Interrupts_and_Tasklets_files/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" width="100%">
</a>
<a href="http://kukuruku.co/hub/diy/usb-killer" class="article-title">USB Killer</a>
</li>
<li>
<a href="http://kukuruku.co/hub/programming/" class="hub">Programming</a>
<a href="http://kukuruku.co/hub/programming/i-do-not-know-c" class="article-image">
<img pagespeed_lazy_replaced_functions="1" pagespeed_lazy_src="http://kukuruku.co/uploads/topics/preview/00/00/01/48/x305ed27fb1_300crop.jpg.pagespeed.ic.2Cooa-WMwC.jpg" alt="I Do Not Know C" pagespeed_url_hash="1448702942" src="Interrupts_and_Tasklets_files/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" width="100%">
</a>
<a href="http://kukuruku.co/hub/programming/i-do-not-know-c" class="article-title">I Do Not Know C</a>
</li>
</ul>
</section>
<section class="article-user-signup text-center">
<h3 class="title text-center">Write your own articles at Kukuruku Hub</h3>
<button class="js-login-form-show btn-become-author">Start writing now</button>
</section>
<section class="comments clearfix">
<div class="col-lg-6 col-md-9 center-block" id="comments">
<header class="comments-header">
<h3><span id="count-comments">2</span> comments</h3>
<a name="comments"></a>
</header>
<div class="comment-wrapper" id="comment_wrapper_id_169">
<section id="comment_id_169" class="comment
														
														">
<a name="comment169"></a>
<a href="http://kukuruku.co/profile/ak-linux/"><img pagespeed_lazy_replaced_functions="1" pagespeed_lazy_src="http://kukuruku.co/uploads/images/00/06/07/2015/01/31/xavatar_48x48.png,q190000.pagespeed.ic.YFRHs0dcO5.png" alt="ak-linux" class="comment-avatar" pagespeed_url_hash="3880184898" src="Interrupts_and_Tasklets_files/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);"></a>
<small>
<ul class="list-unstyled comment-info">
<li class="comment-author">
<a href="http://kukuruku.co/profile/ak-linux/">ak-linux</a>
</li>
<li class="comment-date">
<a href="#comment169" title="Link to comment">
<time datetime="2015-01-31T22:14:42-05:00">31 January 2015, 10:14 PM</time>
</a>
</li>
<li class="goto-comment-child"><a href="#" title="Back to reply">↓</a></li>
<li id="vote_area_comment_169" class="vote 
																																							vote-count-positive
																			    
																		
																			">
<div class="vote-down js-login-form-show" onclick="return ls.vote.vote(169,this,-1,'comment');"><span class="icon-arrow-down"></span></div>
<span class="vote-count" id="vote_total_comment_169">+1</span>
<div class="vote-up js-login-form-show" onclick="return ls.vote.vote(169,this,1,'comment');"><span class="icon-arrow-up"></span></div>
</li>
</ul>
</small>
<div id="comment_content_id_169" class="comment-content text">
I am not sure if my previous comment got submitted, hence submitting again. When you say «tasklet run on same kernel» do you mean on the same CPU?
</div>
</section>
<div class="comment-wrapper" id="comment_wrapper_id_170">
<section id="comment_id_170" class="comment
														
														">
<a name="comment170"></a>
<a href="http://kukuruku.co/profile/kukuruku/"><img pagespeed_lazy_replaced_functions="1" pagespeed_lazy_src="http://kukuruku.co/uploads/images/00/00/01/2014/08/10/xavatar_48x48.jpg,q185218.pagespeed.ic.Qlqp9YdhLi.jpg" alt="Kukuruku Hub" class="comment-avatar" pagespeed_url_hash="2595323530" src="Interrupts_and_Tasklets_files/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);"></a>
<small>
<ul class="list-unstyled comment-info">
<li class="comment-author">
<a href="http://kukuruku.co/profile/kukuruku/" title="Author topic" class="comment-topic-author">Kukuruku Hub</a>
</li>
<li class="comment-date">
<a href="#comment170" title="Link to comment">
<time datetime="2015-01-31T22:52:54-05:00">31 January 2015, 10:52 PM</time>
</a>
</li>
<li class="goto-comment-parent"><a href="#" onclick="ls.comments.goToParentComment(170,169); return false;" title="Reply to">↑</a></li>
<li class="goto-comment-child"><a href="#" title="Back to reply">↓</a></li>
<li id="vote_area_comment_170" class="vote 
																			    
																		
																			">
<div class="vote-down js-login-form-show" onclick="return ls.vote.vote(170,this,-1,'comment');"><span class="icon-arrow-down"></span></div>
<span class="vote-count" id="vote_total_comment_170">&nbsp;&nbsp;</span>
<div class="vote-up js-login-form-show" onclick="return ls.vote.vote(170,this,1,'comment');"><span class="icon-arrow-up"></span></div>
</li>
</ul>
</small>
<div id="comment_content_id_170" class="comment-content text">
Sorry, definitely, on the same <em>core</em>. Fixed that.
</div>
</section>
</div></div>
</div>
<div class="col-lg-6 col-md-9 center-block">
<div class="modal fade in modal-image-upload jqm-init" id="window_upload_img">
<div class="modal-dialog">
<div class="modal-content">
<header class="modal-header">
<button type="button" class="close jqmClose" data-dismiss="modal" aria-hidden="true">×</button>
<h4 class="modal-title">Upload image</h4>
</header>
<div class="modal-body">
<ul class="nav nav-tabs">
<li class="active js-block-upload-img-item" data-type="pc"><a href="#">From PC</a></li>
<li class="js-block-upload-img-item" data-type="link"><a href="#">From internet</a></li>
</ul>
<br>
<form method="POST" action="" enctype="multipart/form-data" id="block_upload_img_content_pc" onsubmit="return false;" class="tab-content js-block-upload-img-content" data-type="pc">
<div class="form-group">
<label for="img_file">File</label>
<input name="img_file" id="img_file" value="" type="file">
</div>
<div class="form-group">
<label for="form-image-align">Align</label>
<select name="align" id="form-image-align" class="form-control">
<option selected="selected" value="">No</option>
<option value="left">Left</option>
<option value="right">Right</option>
<option value="center">Center</option>
</select>
</div>
<div class="form-group">
<label for="form-image-title">Title</label>
<input name="title" id="form-image-title" class="form-control" type="text">
</div>
<button type="submit" class="btn btn-success" onclick="ls.ajaxUploadImg('block_upload_img_content_pc','form_comment_text');">Submit</button>
<button type="submit" class="btn btn-default jqmClose">Cancel</button>
</form>
<form method="POST" action="" enctype="multipart/form-data" id="block_upload_img_content_link" onsubmit="return false;" style="display: none;" class="tab-content js-block-upload-img-content" data-type="link">
<div class="form-group">
<label for="img_file">Image URL</label>
<input name="img_url" id="img_url" value="http://" class="form-control" type="text">
</div>
<div class="form-group">
<label for="form-image-url-align">Align</label>
<select name="align" id="form-image-url-align" class="form-control">
<option selected="selected" value="">No</option>
<option value="left">Left</option>
<option value="right">Right</option>
<option value="center">Center</option>
</select>
</div>
<div class="form-group">
<label for="form-image-url-title">Title</label>
<input name="title" id="form-image-url-title" class="form-control" type="text">
</div>
<button type="submit" class="btn btn-success" onclick="ls.topic.insertImageToEditor(jQuery('#img_url').val(),jQuery('#form-image-url-align').val(),jQuery('#form-image-url-title').val());">Insert as external link</button>
or
<button type="submit" class="btn btn-success" onclick="ls.ajaxUploadImg('block_upload_img_content_link','form_comment_text');">Upload</button>
<button type="submit" class="btn btn-default jqmClose">Cancel</button>
</form>
</div>
</div>
</div>
</div>
<script type="text/javascript" pagespeed_no_defer="">pagespeed.lazyLoadImages.overrideAttributeFunctions();</script><script>var markitupEditor={lang:{"panel_b":"bold","panel_i":"italic","panel_u":"underline","panel_s":"strike through","panel_url":"type link","panel_url_promt":"Type link","panel_code":"code","panel_video":"video","panel_image":"image","panel_cut":"cut","panel_quote":"quote","panel_list":"List","panel_list_ul":"UL LI","panel_list_ol":"OL LI","panel_title":"Header","panel_clear_tags":"clean up the tags","panel_video_promt":"Enter a link to the video","panel_list_li":"list item","panel_image_promt":"Enter the link to an image","panel_user":"user inserted","panel_user_promt":"Enter the user login"}};</script>
<div id="reply" class="reply">
<form method="post" id="form_comment" onsubmit="return false;" enctype="multipart/form-data">
<div><div id="markItUpForm_comment_text" class="markItUp"><div class="markItUpContainer"><div class="markItUpHeader"><ul><li class="markItUpButton markItUpButton1 editor-bold"><a href="" accesskey="B" title="bold [Ctrl+B]"><i class="icon-bold"></i></a></li><li class="markItUpButton markItUpButton2 editor-italic"><a href="" accesskey="I" title="italic [Ctrl+I]"><i class="icon-italic"></i></a></li><li class="markItUpButton markItUpButton3 editor-stroke"><a href="" accesskey="S" title="strike through [Ctrl+S]"><i class="icon-strikethrough"></i></a></li><li class="markItUpButton markItUpButton4 editor-underline"><a href="" accesskey="U" title="underline [Ctrl+U]"><i class="icon-underline"></i></a></li><li class="markItUpButton markItUpButton5 editor-quote"><a href="" accesskey="Q" title="quote [Ctrl+Q]"><i class="icon-quote-right"></i></a></li><li class="markItUpButton markItUpButton6 editor-code"><a href="" title="code"><i class="icon-code"></i></a></li><li class="markItUpButton markItUpButton7 editor-picture"><a href="" accesskey="P" title="image [Ctrl+P]"><i class="icon-picture"></i></a></li><li class="markItUpButton markItUpButton8 editor-link"><a href="" accesskey="L" title="type link [Ctrl+L]"><i class="icon-link"></i></a></li></ul></div><textarea name="comment_text" id="form_comment_text" class="mce-editor markitup-editor form-control markItUpEditor" placeholder="Any thoughts?"></textarea><div class="markItUpFooter"><div class="markItUpResizeHandle"></div></div></div></div></div>
<div class="pull-right">
<button class="btn btn-default js-login-form-show btn-comment-preview">Preview</button>
<button class="btn btn-success js-login-form-show btn-comment-send">Comment</button>
</div>
<input name="reply" value="0" id="form_comment_reply" type="hidden">
<input name="cmt_target_id" value="137" type="hidden">
</form>
</div>
</div>
</section>
<section class="read-more">
<header class="text-center">
<h3>Read Next</h3>
</header>
<ul class="list-inline item-list">
<li title="Let’s go on talking about multithreading in the Linux kernel. Last time I told you about interrupts, the ways to process them, and tasklets. Since..." class="item col-sm-4 col-xs-12">
<a href="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-workqueues">
<div class="content">
<div class="rm-cover" style="background-image: url(http://kukuruku.co/uploads/topics/preview/00/00/01/50/5f45230f03.jpg)"></div>
<div class="rm-overlay"></div>
<div class="table-row">
<div class="row-fluid">
<div class="col-md-10 col-sm-8 col-xs-10 center-block">
<span class="url">Multitasking in the Linux Kernel. Workqueues</span>
</div>
</div>
</div>
<div class="view-count">
<span class="eye glyphicon glyphicon-eye-open"></span>
<span>6193</span>
</div>
</div>
</a>
<div class="hub">
<a href="http://kukuruku.co/hub/nix/">*nix</a>
</div>
</li>
<li title="As tasks share time on one processor kernel, I had to deal with multitasking management. Or rather pseudo-multitasking as tasks share time at one..." class="item col-sm-4 col-xs-12">
<a href="http://kukuruku.co/hub/opensource/multitasking-management-in-the-operating-system-kernel">
<div class="content">
<div class="rm-cover" style="background-image: url(http://kukuruku.co/uploads/topics/preview/00/00/00/39/f776c6a662.jpg)"></div>
<div class="rm-overlay"></div>
<div class="table-row">
<div class="row-fluid">
<div class="col-md-10 col-sm-8 col-xs-10 center-block">
<span class="url">Multitasking Management in the Operating System Kernel</span>
</div>
</div>
</div>
<div class="view-count">
<span class="eye glyphicon glyphicon-eye-open"></span>
<span>15836</span>
</div>
</div>
</a>
<div class="hub">
<a href="http://kukuruku.co/hub/opensource/">Open Source</a>
</div>
</li>
<li title="What I’m Going to Tell You About In  the previous article  we constructed the environment needed to get familiar with the kernel. Then we took a..." class="item col-sm-4 col-xs-12">
<a href="http://kukuruku.co/hub/nix/teaching-the-file-system-to-read">
<div class="content">
<div class="rm-cover" style="background-image: url(http://kukuruku.co/uploads/topics/preview/00/00/00/75/976df6fa6b.jpg)"></div>
<div class="rm-overlay"></div>
<div class="table-row">
<div class="row-fluid">
<div class="col-md-10 col-sm-8 col-xs-10 center-block">
<span class="url">Teaching the File System to Read</span>
</div>
</div>
</div>
<div class="view-count">
<span class="eye glyphicon glyphicon-eye-open"></span>
<span>18233</span>
</div>
</div>
</a>
<div class="hub">
<a href="http://kukuruku.co/hub/nix/">*nix</a>
</div>
</li>
</ul>
</section>
<footer id="footer">
<div class="col-sm-10 center-block text-right">
<ul class="list-inline footer-list">
<li><a href="http://kukuruku.co/page/about">About</a></li>
<li><a href="http://kukuruku.co/page/rules">Rules</a></li>
<li><a href="http://kukuruku.co/page/privacy">Privacy Policy</a></li>
<li><a href="mailto:support@kukuruku.co">Contact us</a></li>
<li>·</li>
<li><a href="https://twitter.com/kukurukuco">Twitter</a></li>
<li><a href="https://www.facebook.com/kukurukuco">Facebook</a></li>
</ul>
</div>
</footer>
<aside class="toolbar hidden-xs">
<section style="display: block;" class="toolbar-scrollup" id="toolbar_scrollup">
<a href="#" onclick="return ls.toolbar.up.goUp();" title="Up" class="toolbar-topic-prev"><span class="glyphicon glyphicon-chevron-up"></span></a>
</section>
</aside>
<div class="modal fade" id="empty-modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"></div></div></div>
<div class="modal fade" id="signin-modal" tabindex="-1" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
<div class="modal-dialog select-none">
<div class="modal-content signin">
<header class="modal-header">
<button type="button" class="close jqmClose" data-dismiss="modal" aria-hidden="true">×</button>
<h4 class="modal-title" id="modal-title">Log In</h4>
</header>
<div class="modal-body">
<form action="http://kukuruku.co/login/" method="post" class="form-horizontal form-signin" role="form">
<small class="text-danger validate-error-hide validate-error-login"></small>
<div class="input-group">
<label for="signin-login" class="input-group-addon"><i class="glyphicon glyphicon-user"></i></label>
<input id="signin-login" class="form-control" name="login" placeholder="Username / Email" type="text">
</div>
<div class="input-group">
<label for="signin-password" class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></label>
<input id="signin-password" class="form-control" name="password" placeholder="Password" type="password">
</div>
<div class="input-group">
<label for="remember-me" class="pull-left remember-me">
<input id="remember-me" name="remember" checked="checked" type="checkbox"> Remember me
</label>
<a href="#" class="pull-right reset-password-link">Forgot password?</a>
</div>
<input name="return-path" value="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" type="hidden">
<button type="submit" name="submit_login" class="btn btn-success btn-block btn-signin">Log In</button>
</form>
﻿<div id="social-auth">
<div class="or-block">
<hr class="hr-or">
<span class="span-or">or</span>
</div>
<ul class="networks">
<li><a href="http://kukuruku.co/login/openid/github/" title="Sign in with Github" class="btn btn-lg btn-block btn-social btn-github"><i class="icon-github"></i>Sign in with Github</a></li>
<li><a href="http://kukuruku.co/login/openid/twitter/?authorize=1" class="btn btn-lg btn-block btn-social btn-twitter" title="Sign in with Twitter"><i class="icon-twitter"></i>Sign in with Twitter</a></li>
<li><button title="Sign in with Facebook" class="btn btn-lg btn-block btn-facebook btn-social"><i class="icon-facebook"></i>Sign in with Facebook</button></li>
</ul>
<div class="text-center np"><img pagespeed_url_hash="1219111664" src="Interrupts_and_Tasklets_files/lock.png" height="14" width="12"> We'll never post to your Twitter, Facebook or Github account without your permission.</div>
<script type="text/javascript" pagespeed_no_defer="">pagespeed.lazyLoadImages.overrideAttributeFunctions();</script><script>var socialAuth={facebook:{client_id:"1446177405629271",redirect_uri:'http://kukuruku.co/login/'+'openid/fb/',scope:"user_birthday,user_website,email,user_about_me"},twitter:{redirect_uri:'http://kukuruku.co/login/'+'openid/twitter/?authorize=1'}};</script>
</div>
</div>
<div class="modal-footer text-right">
<span>Don't have an account? <a href="#" class="link-signup">Sign up now</a></span>
</div>
</div><!-- /.modal-content signin -->
<div class="modal-content signup">
<header class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h4 class="modal-title" id="modal-title">Sign Up</h4>
</header>
<div class="modal-body">
<form action="http://kukuruku.co/registration/" method="post" class="form-horizontal form-signup" role="form" autocomplete="off">
<input style="display:none">
<input style="display:none" type="password">
<div class="input-group">
<label for="signup-login" class="input-group-addon"><i class="glyphicon glyphicon-user"></i></label>
<input id="signup-login" class="form-control js-ajax-validate" name="login" placeholder="Username" autocomplete="off" type="text">
</div>
<small class="text-danger validate-msg validate-error-hide validate-error-field-login"></small>
<div class="input-group">
<label for="signup-password" class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></label>
<input id="signup-password" class="form-control" name="password" placeholder="Password" autocomplete="off" type="password">
</div>
<small class="text-danger validate-msg validate-error-hide validate-error-field-password"></small>
<div class="input-group">
<label for="signup-email" class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></label>
<input id="signup-email" class="form-control" name="mail" placeholder="Email (optional)" autocomplete="off" type="email">
</div>
<small class="text-danger validate-msg validate-error-hide validate-error-field-mail"></small>
<input name="return-path" value="http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets" type="hidden">
<button type="submit" name="submit_register" class="btn btn-success btn-block btn-signup">Create Account</button>
</form>
﻿<div id="social-auth">
<div class="or-block">
<hr class="hr-or">
<span class="span-or">or</span>
</div>
<ul class="networks">
<li><a href="http://kukuruku.co/login/openid/github/" title="Sign in with Github" class="btn btn-lg btn-block btn-social btn-github"><i class="icon-github"></i>Sign in with Github</a></li>
<li><a href="http://kukuruku.co/login/openid/twitter/?authorize=1" class="btn btn-lg btn-block btn-social btn-twitter" title="Sign in with Twitter"><i class="icon-twitter"></i>Sign in with Twitter</a></li>
<li><button title="Sign in with Facebook" class="btn btn-lg btn-block btn-facebook btn-social"><i class="icon-facebook"></i>Sign in with Facebook</button></li>
</ul>
<div class="text-center np"><img pagespeed_url_hash="1219111664" src="Interrupts_and_Tasklets_files/lock.png" height="14" width="12"> We'll never post to your Twitter, Facebook or Github account without your permission.</div>
<script type="text/javascript" pagespeed_no_defer="">pagespeed.lazyLoadImages.overrideAttributeFunctions();</script><script>var socialAuth={facebook:{client_id:"1446177405629271",redirect_uri:'http://kukuruku.co/login/'+'openid/fb/',scope:"user_birthday,user_website,email,user_about_me"},twitter:{redirect_uri:'http://kukuruku.co/login/'+'openid/twitter/?authorize=1'}};</script>
</div>
</div>
<div class="modal-footer text-right">
<span>Already have an account? <a href="#" class="link-signin">Log in here</a></span>
</div>
</div>
<div class="modal-content reset-password">
<header class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h4 class="modal-title" id="modal-title">Reset Password</h4>
</header>
<div class="modal-body">
<p>Enter the email address associated with your account, and we'll email you a link to reset your password.</p>
<form action="http://kukuruku.co/login/reminder/" method="POST" id="popup-reminder-form">
<div class="input-group">
<label for="popup-reminder-mail" class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></label>
<input itype="text" name="mail" id="popup-reminder-mail" class="form-control" placeholder="Email">
</div>
<small class="text-danger validate-msg validate-error-hide validate-error-reminder"></small>
<div class="form-group">
<button type="submit" name="submit_reminder" class="btn btn-success btn-block" id="popup-reminder-form-submit">Send Reset Link</button>
</div>
</form>
</div>
<div class="modal-footer text-right">
<span>Already have an account? <a href="#" class="link-signin">Log in here</a></span>
</div>
</div>
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<script src="Interrupts_and_Tasklets_files/aeb7423f06aafea67ae49d676ed76aa6.js"></script>
<!--[if lt IE 9]><script type='text/javascript' src='http://kukuruku.co/engine/lib/external/html5shiv.js'></script><![endif]-->
<script>ls.lang.load({"blog_join":"Connect","blog_leave":"Disconnect"});ls.registry.set('comment_max_tree',7);ls.registry.set('block_stream_show_tip',true);</script>
<script>//<![CDATA[
(function(){var d=encodeURIComponent,f=window,g=document,h="documentElement",k="length",l="prototype",m="body",p="&",s="&ci=",t=",",u="?",v="Content-Type",w="Microsoft.XMLHTTP",x="Msxml2.XMLHTTP",y="POST",z="application/x-www-form-urlencoded",A="img",B="input",C="load",D="oh=",E="on",F="pagespeed_url_hash",G="url=";f.pagespeed=f.pagespeed||{};var H=f.pagespeed,I=function(a,b,c){this.c=a;this.e=b;this.d=c;this.b=this.f();this.a={}};I[l].f=function(){return{height:f.innerHeight||g[h].clientHeight||g[m].clientHeight,width:f.innerWidth||g[h].clientWidth||g[m].clientWidth}};I[l].g=function(a){a=a.getBoundingClientRect();return{top:a.top+(void 0!==f.pageYOffset?f.pageYOffset:(g[h]||g[m].parentNode||g[m]).scrollTop),left:a.left+(void 0!==f.pageXOffset?f.pageXOffset:(g[h]||g[m].parentNode||g[m]).scrollLeft)}};I[l].h=function(a){if(0>=a.offsetWidth&&0>=a.offsetHeight)return!1;a=this.g(a);var b=a.top.toString()+t+a.left.toString();if(this.a.hasOwnProperty(b))return!1;this.a[b]=!0;return a.top<=this.b.height&&a.left<=this.b.width};I[l].i=function(a){var b;if(f.XMLHttpRequest)b=new XMLHttpRequest;else if(f.ActiveXObject)try{b=new ActiveXObject(x)}catch(c){try{b=new ActiveXObject(w)}catch(e){}}if(!b)return!1;b.open(y,this.c+(-1==this.c.indexOf(u)?u:p)+G+d(this.e));b.setRequestHeader(v,z);b.send(a);return!0};I[l].k=function(){for(var a=[A,B],b=[],c={},e=0;e<a[k];++e)for(var q=g.getElementsByTagName(a[e]),n=0;n<q[k];++n){var r=q[n].getAttribute(F);r&&(q[n].getBoundingClientRect&&this.h(q[n]))&&!(r in c)&&(b.push(r),c[r]=!0)}if(0!=b[k]){a=D+this.d;a+=s+d(b[0]);for(e=1;e<b[k];++e){c=t+d(b[e]);if(131072<a[k]+c[k])break;a+=c}H.criticalImagesBeaconData=a;this.i(a)}};H.j=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent(E+b,c);else{var e=a[E+b];a[E+b]=function(){c.call(this);e&&e.call(this)}}};H.l=function(a,b,c){var e=new I(a,b,c);H.j(f,C,function(){f.setTimeout(function(){e.k()},0)})};H.criticalImagesBeaconInit=H.l;})();pagespeed.criticalImagesBeaconInit('/mod_pagespeed_beacon','http://kukuruku.co/hub/nix/multitasking-in-the-linux-kernel-interrupts-and-tasklets','wktEWvKVeN');
//]]></script>

<iframe tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;" src="Interrupts_and_Tasklets_files/postmessageRelay.html" id="oauth2relay1746451800" name="oauth2relay1746451800"></iframe></body></html>